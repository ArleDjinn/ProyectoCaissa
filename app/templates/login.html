{# templates/login.html #}
{% extends "base.html" %}

{% block title %}Iniciar sesión{% endblock %}

{% block extra_head %}
<style>
  .auth-section {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 80vh;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(13, 110, 253, 0.05));
  }
  .auth-card {
    background: #fff;
    border-radius: 1.25rem;
    box-shadow: 0 6px 25px rgba(15, 23, 42, 0.1);
    max-width: 420px;
    width: 100%;
    padding: 2rem;
  }
  .btn-google {
    background: #fff;
    border: 1px solid #dfe1e5;
    color: #202124;
    font-weight: 600;
    padding: 0.85rem;
    border-radius: 999px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
  }
  .btn-google:hover {
    background: #f6f9ff;
    border-color: #c0d0ff;
    color: #0d47a1;
  }
  .auth-divider {
    position: relative;
    text-align: center;
    margin: 2rem 0;
  }
  .auth-divider::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 1px;
    background: #e9ecef;
  }
  .auth-divider span {
    background: #fff;
    padding: 0 0.75rem;
    color: #6c757d;
    font-size: 0.75rem;
    text-transform: uppercase;
  }
</style>
{% endblock %}

{% block content %}
<section class="auth-section">
  <div class="auth-card">
    <h3 class="text-center mb-4 fw-bold">Iniciar sesión</h3>

    {# --- Opción 1: Google --- #}
    {% if google_login_url %}
    <div class="d-grid mb-3">
      <a class="btn-google" href="{{ google_login_url }}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 533.5 544.3" height="20" width="20" aria-hidden="true">
          <path fill="#4285f4" d="M533.5 278.4c0-17.4-1.5-34-4.5-50.2H272.1v95h147.3c-6.3 34.4-25 63.5-53.4 83v68h86.2c50.5-46.5 81.3-114.9 81.3-195.8z"/>
          <path fill="#34a853" d="M272.1 544.3c72.6 0 133.6-24 178.2-65.2l-86.2-68c-24 16.2-54.8 25.7-92 25.7-70.9 0-131-47.9-152.6-112.1h-89.4v70.8c44.8 88.6 137 148.8 241.9 148.8z"/>
          <path fill="#fbbc05" d="M119.5 324.7c-10.8-32.4-10.8-67.8 0-100.2v-70.9h-89.4c-38.2 75.8-38.2 165.4 0 241.2z"/>
          <path fill="#ea4335" d="M272.1 107.7c38.8-.6 75.9 13.6 104.3 40.1l77.7-77.7C405.7 24.6 345.7-.6 272.1 0 167.2 0 75 60.3 30.1 148.9l89.4 70.9c21.6-64.2 81.7-112.1 152.6-112.1z"/>
        </svg>
        Continuar con Google
      </a>
    </div>
    {% endif %}

    <div class="auth-divider"><span>o usa tu correo</span></div>

    {# --- Opción 2: Correo --- #}
    <form method="post" novalidate>
      {{ form.hidden_tag() }}

      <div class="mb-3">
        {{ form.email.label(class="form-label fw-semibold") }}
        {{ form.email(class="form-control", placeholder="tucorreo@ejemplo.com") }}
        {% for error in form.email.errors %}
          <div class="text-danger small">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="mb-3">
        {{ form.password.label(class="form-label fw-semibold") }}
        {{ form.password(class="form-control", placeholder="••••••••") }}
        {% for error in form.password.errors %}
          <div class="text-danger small">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="d-grid mb-3">
        {{ form.submit(class="btn btn-primary btn-lg rounded-pill") }}
      </div>

      <div class="text-center">
        <a class="small" href="{{ url_for('auth.request_password_reset') }}">
          ¿Olvidaste tu contraseña?
        </a>
      </div>
    </form>

    {% if not google_login_url %}
    <div class="alert alert-warning d-flex align-items-start gap-2 mt-4 mb-0">
      <span aria-hidden="true" class="mt-1">⚠️</span>
      <div>Actualmente el inicio de sesión con Google no está disponible.</div>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}

{% block footer %}{% endblock %}
